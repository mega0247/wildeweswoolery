<script>
  // ‚úÖ VPN/Proxy check BEFORE rendering main content
  async function verifyVisitor() {
    try {
      const res = await fetch("/api/vpn-check");
      const result = await res.json();

      // ‚úÖ Debugging: log result in browser console (not shown to user)
      console.log("üîé VPN Check Result:", result);

      if (result.blocked) {
        // ‚úÖ Show block message only for confirmed VPN/Proxy/Tor
        document.body.innerHTML = `
          <div class="blocked-message">
            <h2>‚ùå Access Denied</h2>
            <p>VPNs, proxies, or Tor connections are not allowed.<br>
            Please disable them and refresh the page.</p>
          </div>`;
        throw new Error("Blocked visitor due to VPN/Proxy/Tor detection");
      }
    } catch (err) {
      console.warn("VPN check failed or blocked visitor.", err);
    }
  }
  verifyVisitor();
</script>
